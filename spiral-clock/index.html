<!DOCTYPE html>
<html>
<head>
    <title>loader canvas 2d</title>
	
</head>
 
<body >
 
<canvas id="myCanvas" width="500" height="500">
  Why don't you get a real browser?   <!-- Displayed if the client does not support HTML5 -->
</canvas>
 
</body>


<script type="text/javascript">
var can = function () {
var canvas;
var context;
var step=0;
var XX=0,YY=1,OP=0,XX1=10;
return {
draw: function () {
YY++;if(YY>190){YY=1;}
var r = Math.floor(Math.random() * 255) + YY+40;
var g = Math.floor(Math.random() * 255) + YY/1.5;
var b = Math.floor(Math.random() * 255) + YY/1.5;
var s = 'rgba(' + r + ',' + g + ',' + b + ','+ 0.5+')';
if(XX==0 || step==0){
XX==Math.sin(XX)*XX;XX1++;
OP=OP+0.1;
if(XX>300){XX=0;step=1;}
}

if(step==1){
OP=0.5;
XX==Math.sin(XX)-XX;
step=1;
if(XX<0){XX=0;step=0;}
}

if(XX1>155){XX1=0;}
context.rotate(0.01 * Math.PI);

context.fillStyle = 'rgba(' + XX + ',' + 0 + ',' + 0 + ','+ 0.5+')';
context.fillRect(0, 0, 500, 500);


context.fillStyle = s;
context.fillRect(10, 0, XX1, XX1+OP);
},
init: function () {
canvas = document.getElementById("myCanvas");
context = canvas.getContext("2d");
context.translate(250, 250);
setInterval(can.draw, 1);
}
}
} ();

window.onload = can.init;

    </script>
 
</html>